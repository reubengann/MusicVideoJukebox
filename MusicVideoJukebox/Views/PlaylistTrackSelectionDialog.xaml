<Window x:Class="MusicVideoJukebox.Views.PlaylistTrackSelectionDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MusicVideoJukebox.Views"
        xmlns:mat="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
        xmlns:vms="clr-namespace:MusicVideoJukebox.Core.ViewModels;assembly=MusicVideoJukebox.Core"
        xmlns:mah="http://metro.mahapps.com/winfx/xaml/controls"
        mc:Ignorable="d"
        d:Height="450" d:Width="400" Background="{DynamicResource MahApps.Brushes.ThemeBackground}"
        Height="{Binding WindowHeight, Mode=TwoWay}" 
        Width="{Binding WindowWidth, Mode=TwoWay}" 
        >
    <Viewbox>
    <Grid Width="300" Height="400" FocusManager.FocusedElement="{Binding ElementName=SearchBox}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" Margin="0,10,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <!-- For the icon -->
                <ColumnDefinition Width="*" />
                <!-- For the TextBox -->
            </Grid.ColumnDefinitions>

            <!-- Magnifying Glass Icon -->
            <mat:MaterialIcon Grid.Column="0" Kind="Magnify" Width="20" Height="20" 
                      VerticalAlignment="Center" Margin="5" Foreground="White" />

            <!-- Search TextBox -->
            <TextBox Grid.Column="1" Text="{Binding FilterText, UpdateSourceTrigger=PropertyChanged}" 
             VerticalAlignment="Center" Margin="5,0,0,0" x:Name="SearchBox" />
        </Grid>
            <DataGrid Grid.Row="1"
          ItemsSource="{Binding FilteredTracks}"
          SelectedItem="{Binding SelectedTrack}"
          AutoGenerateColumns="False"
          EnableRowVirtualization="True"
          EnableColumnVirtualization="True"
          HeadersVisibility="None"
          GridLinesVisibility="None"
          RowHeight="50"
          Background="Transparent"
          BorderThickness="0"
          SelectionMode="Single"
          SelectionUnit="FullRow"
          CanUserAddRows="False"
          CanUserResizeRows="False"
          CanUserResizeColumns="False"
          CanUserSortColumns="False"
                      x:Name="TrackDataGrid"
                      MouseDoubleClick="TrackDataGrid_MouseDoubleClick">

                <DataGrid.Columns>
                    <DataGridTextColumn Binding="{Binding PlayOrder}" Width="50">
                        <DataGridTextColumn.ElementStyle>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontSize" Value="16"/>
                                <Setter Property="FontWeight" Value="Bold"/>
                                <Setter Property="Foreground" Value="Gray"/>
                                <Setter Property="VerticalAlignment" Value="Center"/>
                                <Setter Property="Margin" Value="5"/>
                            </Style>
                        </DataGridTextColumn.ElementStyle>
                    </DataGridTextColumn>

                    <DataGridTemplateColumn Width="*">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Vertical">
                                    <TextBlock Text="{Binding Artist}" FontSize="14" FontWeight="Bold" Foreground="White"/>
                                    <TextBlock Text="{Binding Title}" FontSize="12" Foreground="White"/>
                                </StackPanel>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
            <UniformGrid Grid.Row="2" Columns="2" HorizontalAlignment="Center" VerticalAlignment="Center">
                <Button Content="OK" Command="{Binding OKCommand}" Width="100" Height="30" Margin="5"/>
                <Button Content="Cancel" Command="{Binding CancelCommand}" Width="100" Height="30" Margin="5"/>
            </UniformGrid>
        </Grid>
    </Viewbox>
</Window>
